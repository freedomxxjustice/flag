import urllib.parse
import csv
import requests

# Some helper mappings (small set here, full one can be extended)
country_data = [
    {
        "name": "Afghanistan",
        "region": "Asia",
        "memberships": ["UN"],
        "special_tags": ["landlocked"],
        "emoji": "ðŸ‡¦ðŸ‡«",
    },
    {
        "name": "Albania",
        "region": "Europe",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¦ðŸ‡±",
    },
    {
        "name": "Algeria",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡©ðŸ‡¿",
    },
    {
        "name": "Andorra",
        "region": "Europe",
        "memberships": ["UN"],
        "special_tags": ["microstate"],
        "emoji": "ðŸ‡¦ðŸ‡©",
    },
    {
        "name": "Angola",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¦ðŸ‡´",
    },
    {
        "name": "Antigua and Barbuda",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": ["island nation"],
        "emoji": "ðŸ‡¦ðŸ‡¬",
    },
    {
        "name": "Argentina",
        "region": "South America",
        "memberships": ["UN", "G20"],
        "special_tags": [],
        "emoji": "ðŸ‡¦ðŸ‡·",
    },
    {
        "name": "Armenia",
        "region": "Asia",
        "memberships": ["UN"],
        "special_tags": ["landlocked"],
        "emoji": "ðŸ‡¦ðŸ‡²",
    },
    {
        "name": "Aruba",
        "region": "North America",
        "memberships": [],
        "special_tags": ["special status", "Netherlands"],
        "emoji": "ðŸ‡¦ðŸ‡¼",
    },
    {
        "name": "Australia",
        "region": "Oceania",
        "memberships": ["UN", "G20"],
        "special_tags": [],
        "emoji": "ðŸ‡¦ðŸ‡º",
    },
    {
        "name": "Austria",
        "region": "Europe",
        "memberships": ["UN", "EU"],
        "special_tags": [],
        "emoji": "ðŸ‡¦ðŸ‡¹",
    },
    {
        "name": "Azerbaijan",
        "region": "Asia",
        "memberships": ["UN", "CIS"],
        "special_tags": [],
        "emoji": "ðŸ‡¦ðŸ‡¿",
    },
    {
        "name": "Bahamas",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡¸",
    },
    {
        "name": "Bahrain",
        "region": "Asia",
        "memberships": ["UN", "GCC"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡­",
    },
    {
        "name": "Bangladesh",
        "region": "Asia",
        "memberships": ["UN", "SAARC"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡©",
    },
    {
        "name": "Barbados",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡§",
    },
    {
        "name": "Belarus",
        "region": "Europe",
        "memberships": ["UN", "CIS"],
        "special_tags": ["partially recognized"],
        "emoji": "ðŸ‡§ðŸ‡¾",
    },
    {
        "name": "Belgium",
        "region": "Europe",
        "memberships": ["UN", "EU", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡ª",
    },
    {
        "name": "Belize",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡¿",
    },
    {
        "name": "Benin",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡¯",
    },
    {
        "name": "Bhutan",
        "region": "Asia",
        "memberships": ["UN"],
        "special_tags": ["landlocked"],
        "emoji": "ðŸ‡§ðŸ‡¹",
    },
    {
        "name": "Bolivia",
        "region": "South America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡´",
    },
    {
        "name": "Bosnia and Herzegovina",
        "region": "Europe",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡¦",
    },
    {
        "name": "Botswana",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡¼",
    },
    {
        "name": "Brazil",
        "region": "South America",
        "memberships": ["UN", "G20", "BRICS"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡·",
    },
    {
        "name": "Brunei",
        "region": "Asia",
        "memberships": ["UN"],
        "special_tags": ["microstate"],
        "emoji": "ðŸ‡§ðŸ‡³",
    },
    {
        "name": "Bulgaria",
        "region": "Europe",
        "memberships": ["UN", "EU", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡¬",
    },
    {
        "name": "Burkina Faso",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡«",
    },
    {
        "name": "Burundi",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡§ðŸ‡®",
    },
    {
        "name": "Cabo Verde",
        "region": "Africa",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡»",
    },
    {
        "name": "Cambodia",
        "region": "Asia",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡°ðŸ‡­",
    },
    {
        "name": "Cameroon",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡²",
    },
    {
        "name": "Canada",
        "region": "North America",
        "memberships": ["UN", "G7", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡¦",
    },
    {
        "name": "Central African Republic",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡«",
    },
    {
        "name": "Chad",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¹ðŸ‡©",
    },
    {
        "name": "Chile",
        "region": "South America",
        "memberships": ["UN", "PACI", "G20"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡±",
    },
    {
        "name": "China",
        "region": "Asia",
        "memberships": ["UN", "BRICS"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡³",
    },
    {
        "name": "Colombia",
        "region": "South America",
        "memberships": ["UN", "G20"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡´",
    },
    {
        "name": "Comoros",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡°ðŸ‡²",
    },
    {
        "name": "Congo",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡¬",
    },
    {
        "name": "Congo (Democratic Republic)",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡©",
    },
    {
        "name": "Costa Rica",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡·",
    },
    {
        "name": "Croatia",
        "region": "Europe",
        "memberships": ["UN", "EU", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡­ðŸ‡·",
    },
    {
        "name": "Cuba",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡º",
    },
    {
        "name": "Cyprus",
        "region": "Asia",
        "memberships": ["UN"],
        "special_tags": ["special status"],
        "emoji": "ðŸ‡¨ðŸ‡¾",
    },
    {
        "name": "Czech Republic",
        "region": "Europe",
        "memberships": ["UN", "EU", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡¨ðŸ‡¿",
    },
    {
        "name": "Denmark",
        "region": "Europe",
        "memberships": ["UN", "EU", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡©ðŸ‡°",
    },
    {
        "name": "Djibouti",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡©ðŸ‡¯",
    },
    {
        "name": "Dominica",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡©ðŸ‡²",
    },
    {
        "name": "Dominican Republic",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡©ðŸ‡´",
    },
    {
        "name": "East Timor",
        "region": "Asia",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¹ðŸ‡±",
    },
    {
        "name": "Ecuador",
        "region": "South America",
        "memberships": ["UN", "PACI"],
        "special_tags": [],
        "emoji": "ðŸ‡ªðŸ‡¨",
    },
    {
        "name": "Egypt",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡ªðŸ‡¬",
    },
    {
        "name": "El Salvador",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¸ðŸ‡»",
    },
    {
        "name": "Equatorial Guinea",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡¶",
    },
    {
        "name": "Eritrea",
        "region": "Africa",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡ªðŸ‡·",
    },
    {
        "name": "Estonia",
        "region": "Europe",
        "memberships": ["UN", "EU"],
        "special_tags": [],
        "emoji": "ðŸ‡ªðŸ‡ª",
    },
    {
        "name": "Eswatini",
        "region": "Africa",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¸ðŸ‡¿",
    },
    {
        "name": "Ethiopia",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡ªðŸ‡¹",
    },
    {
        "name": "Fiji",
        "region": "Oceania",
        "memberships": ["UN", "PIF"],
        "special_tags": [],
        "emoji": "ðŸ‡«ðŸ‡¯",
    },
    {
        "name": "Finland",
        "region": "Europe",
        "memberships": ["UN", "EU", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡«ðŸ‡®",
    },
    {
        "name": "France",
        "region": "Europe",
        "memberships": ["UN", "EU", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡«ðŸ‡·",
    },
    {
        "name": "Gabon",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡¦",
    },
    {
        "name": "Gambia",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡²",
    },
    {
        "name": "Georgia",
        "region": "Asia",
        "memberships": ["UN", "CIS"],
        "special_tags": ["partially recognized"],
        "emoji": "ðŸ‡¬ðŸ‡ª",
    },
    {
        "name": "Germany",
        "region": "Europe",
        "memberships": ["UN", "EU", "G7"],
        "special_tags": [],
        "emoji": "ðŸ‡©ðŸ‡ª",
    },
    {
        "name": "Ghana",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡­",
    },
    {
        "name": "Greece",
        "region": "Europe",
        "memberships": ["UN", "EU", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡·",
    },
    {
        "name": "Grenada",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡©",
    },
    {
        "name": "Guatemala",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡¹",
    },
    {
        "name": "Guinea",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡³",
    },
    {
        "name": "Guinea-Bissau",
        "region": "Africa",
        "memberships": ["UN", "AU"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡¼",
    },
    {
        "name": "Guyana",
        "region": "South America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡¬ðŸ‡¾",
    },
    {
        "name": "Haiti",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡­ðŸ‡¹",
    },
    {
        "name": "Honduras",
        "region": "North America",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡­ðŸ‡³",
    },
    {
        "name": "Hungary",
        "region": "Europe",
        "memberships": ["UN", "EU", "NATO"],
        "special_tags": [],
        "emoji": "ðŸ‡­ðŸ‡º",
    },
    {
        "name": "Iceland",
        "region": "Europe",
        "memberships": ["UN"],
        "special_tags": ["island"],
        "emoji": "ðŸ‡®ðŸ‡¸",
    },
    {
        "name": "India",
        "region": "Asia",
        "memberships": ["UN", "BRICS", "SAARC"],
        "special_tags": [],
        "emoji": "ðŸ‡®ðŸ‡³",
    },
    {
        "name": "Indonesia",
        "region": "Asia",
        "memberships": ["UN", "ASEAN"],
        "special_tags": [],
        "emoji": "ðŸ‡®ðŸ‡©",
    },
    {
        "name": "Iran",
        "region": "Asia",
        "memberships": ["UN"],
        "special_tags": [],
        "emoji": "ðŸ‡®ðŸ‡·",
    },
    {
        "name": "Iraq",
        "region": "Asia",
        "memberships": ["UN", "OIC"],
        "special_tags": [],
        "emoji": "ðŸ‡®ðŸ‡¶",
    },
    {
        "name": "Ireland",
        "region": "Europe",
        "memberships": ["UN", "EU"],
        "special_tags": [],
        "emoji": "ðŸ‡®ðŸ‡ª",
    },
    {
        "name": "Israel",
        "region": "Asia",
        "memberships": ["UN"],
        "special_tags": ["partially recognized"],
        "emoji": "ðŸ‡®ðŸ‡±",
    },
    {
        "name": "Italy",
        "region": "Europe",
        "memberships": ["UN", "EU", "G7"],
        "special_tags": [],
        "emoji": "ðŸ‡®ðŸ‡¹",
    },
]

country_data.extend(
    [
        {
            "name": "Haiti",
            "region": "North America",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡­ðŸ‡¹",
        },
        {
            "name": "Honduras",
            "region": "North America",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡­ðŸ‡³",
        },
        {
            "name": "Hungary",
            "region": "Europe",
            "memberships": ["UN", "EU", "NATO"],
            "special_tags": [],
            "emoji": "ðŸ‡­ðŸ‡º",
        },
        {
            "name": "Iceland",
            "region": "Europe",
            "memberships": ["UN"],
            "special_tags": ["island"],
            "emoji": "ðŸ‡®ðŸ‡¸",
        },
        {
            "name": "India",
            "region": "Asia",
            "memberships": ["UN", "BRICS", "SAARC"],
            "special_tags": [],
            "emoji": "ðŸ‡®ðŸ‡³",
        },
        {
            "name": "Indonesia",
            "region": "Asia",
            "memberships": ["UN", "ASEAN"],
            "special_tags": [],
            "emoji": "ðŸ‡®ðŸ‡©",
        },
        {
            "name": "Iran",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡®ðŸ‡·",
        },
        {
            "name": "Iraq",
            "region": "Asia",
            "memberships": ["UN", "OIC"],
            "special_tags": [],
            "emoji": "ðŸ‡®ðŸ‡¶",
        },
        {
            "name": "Ireland",
            "region": "Europe",
            "memberships": ["UN", "EU"],
            "special_tags": [],
            "emoji": "ðŸ‡®ðŸ‡ª",
        },
        {
            "name": "Israel",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": ["partially recognized"],
            "emoji": "ðŸ‡®ðŸ‡±",
        },
        {
            "name": "Italy",
            "region": "Europe",
            "memberships": ["UN", "EU", "G7"],
            "special_tags": [],
            "emoji": "ðŸ‡®ðŸ‡¹",
        },
        {
            "name": "Jamaica",
            "region": "North America",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡¯ðŸ‡²",
        },
        {
            "name": "Japan",
            "region": "Asia",
            "memberships": ["UN", "G7"],
            "special_tags": [],
            "emoji": "ðŸ‡¯ðŸ‡µ",
        },
        {
            "name": "Jordan",
            "region": "Asia",
            "memberships": ["UN", "OIC"],
            "special_tags": [],
            "emoji": "ðŸ‡¯ðŸ‡´",
        },
        {
            "name": "Kazakhstan",
            "region": "Asia",
            "memberships": ["UN", "CIS"],
            "special_tags": [],
            "emoji": "ðŸ‡°ðŸ‡¿",
        },
        {
            "name": "Kenya",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡°ðŸ‡ª",
        },
        {
            "name": "Kiribati",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡°ðŸ‡®",
        },
        {
            "name": "Korea (North)",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡°ðŸ‡µ",
        },
        {
            "name": "Korea (South)",
            "region": "Asia",
            "memberships": ["UN", "G20"],
            "special_tags": [],
            "emoji": "ðŸ‡°ðŸ‡·",
        },
        {
            "name": "Kuwait",
            "region": "Asia",
            "memberships": ["UN", "GCC"],
            "special_tags": [],
            "emoji": "ðŸ‡°ðŸ‡¼",
        },
        {
            "name": "Kyrgyzstan",
            "region": "Asia",
            "memberships": ["UN", "CIS"],
            "special_tags": [],
            "emoji": "ðŸ‡°ðŸ‡¬",
        },
        {
            "name": "Laos",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡±ðŸ‡¦",
        },
        {
            "name": "Latvia",
            "region": "Europe",
            "memberships": ["UN", "EU"],
            "special_tags": [],
            "emoji": "ðŸ‡±ðŸ‡»",
        },
        {
            "name": "Lebanon",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡±ðŸ‡§",
        },
        {
            "name": "Lesotho",
            "region": "Africa",
            "memberships": ["UN"],
            "special_tags": ["landlocked"],
            "emoji": "ðŸ‡±ðŸ‡¸",
        },
        {
            "name": "Liberia",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡±ðŸ‡¸",
        },
        {
            "name": "Libya",
            "region": "Africa",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡±ðŸ‡¾",
        },
        {
            "name": "Liechtenstein",
            "region": "Europe",
            "memberships": ["UN"],
            "special_tags": ["microstate"],
            "emoji": "ðŸ‡±ðŸ‡®",
        },
        {
            "name": "Lithuania",
            "region": "Europe",
            "memberships": ["UN", "EU"],
            "special_tags": [],
            "emoji": "ðŸ‡±ðŸ‡¹",
        },
        {
            "name": "Luxembourg",
            "region": "Europe",
            "memberships": ["UN", "EU"],
            "special_tags": ["microstate"],
            "emoji": "ðŸ‡±ðŸ‡º",
        },
        {
            "name": "Madagascar",
            "region": "Africa",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡¬",
        },
        {
            "name": "Malawi",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡¼",
        },
        {
            "name": "Malaysia",
            "region": "Asia",
            "memberships": ["UN", "ASEAN"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡¾",
        },
        {
            "name": "Maldives",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡²ðŸ‡»",
        },
        {
            "name": "Mali",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡±",
        },
        {
            "name": "Malta",
            "region": "Europe",
            "memberships": ["UN", "EU"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡¹",
        },
        {
            "name": "Marshall Islands",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": ["micronation"],
            "emoji": "ðŸ‡²ðŸ‡­",
        },
        {
            "name": "Mauritania",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡·",
        },
        {
            "name": "Mauritius",
            "region": "Africa",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡º",
        },
        {
            "name": "Mexico",
            "region": "North America",
            "memberships": ["UN", "G20"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡½",
        },
        {
            "name": "Micronesia",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡«ðŸ‡²",
        },
        {
            "name": "Moldova",
            "region": "Europe",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡©",
        },
        {
            "name": "Monaco",
            "region": "Europe",
            "memberships": ["UN"],
            "special_tags": ["microstate"],
            "emoji": "ðŸ‡²ðŸ‡¨",
        },
        {
            "name": "Mongolia",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡³",
        },
        {
            "name": "Montenegro",
            "region": "Europe",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡ª",
        },
        {
            "name": "Morocco",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡¦",
        },
        {
            "name": "Mozambique",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡¿",
        },
        {
            "name": "Myanmar",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡²",
        },
    ]
)

country_data.extend(
    [
        {
            "name": "Namibia",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡³ðŸ‡¦",
        },
        {
            "name": "Nauru",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": ["island nation", "microstate"],
            "emoji": "ðŸ‡³ðŸ‡·",
        },
        {
            "name": "Nepal",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡³ðŸ‡µ",
        },
        {
            "name": "Netherlands",
            "region": "Europe",
            "memberships": ["UN", "EU", "NATO"],
            "special_tags": [],
            "emoji": "ðŸ‡³ðŸ‡±",
        },
        {
            "name": "New Zealand",
            "region": "Oceania",
            "memberships": ["UN", "CWE"],
            "special_tags": [],
            "emoji": "ðŸ‡³ðŸ‡¿",
        },
        {
            "name": "Nicaragua",
            "region": "North America",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡³ðŸ‡®",
        },
        {
            "name": "Niger",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡³ðŸ‡ª",
        },
        {
            "name": "Nigeria",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡³ðŸ‡¬",
        },
        {
            "name": "North Macedonia",
            "region": "Europe",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡²ðŸ‡°",
        },
        {
            "name": "Norway",
            "region": "Europe",
            "memberships": ["UN", "EU", "NATO"],
            "special_tags": [],
            "emoji": "ðŸ‡³ðŸ‡´",
        },
        {
            "name": "Oman",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡´ðŸ‡²",
        },
        {
            "name": "Pakistan",
            "region": "Asia",
            "memberships": ["UN", "SAARC"],
            "special_tags": [],
            "emoji": "ðŸ‡µðŸ‡°",
        },
        {
            "name": "Palau",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": ["micronation"],
            "emoji": "ðŸ‡µðŸ‡¼",
        },
        {
            "name": "Panama",
            "region": "North America",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡µðŸ‡¦",
        },
        {
            "name": "Papua New Guinea",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡µðŸ‡¬",
        },
        {
            "name": "Paraguay",
            "region": "South America",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡µðŸ‡¾",
        },
        {
            "name": "Peru",
            "region": "South America",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡µðŸ‡ª",
        },
        {
            "name": "Philippines",
            "region": "Asia",
            "memberships": ["UN", "ASEAN"],
            "special_tags": [],
            "emoji": "ðŸ‡µðŸ‡­",
        },
        {
            "name": "Poland",
            "region": "Europe",
            "memberships": ["UN", "EU", "NATO"],
            "special_tags": [],
            "emoji": "ðŸ‡µðŸ‡±",
        },
        {
            "name": "Portugal",
            "region": "Europe",
            "memberships": ["UN", "EU", "NATO"],
            "special_tags": [],
            "emoji": "ðŸ‡µðŸ‡¹",
        },
        {
            "name": "Qatar",
            "region": "Asia",
            "memberships": ["UN", "GCC"],
            "special_tags": [],
            "emoji": "ðŸ‡¶ðŸ‡¦",
        },
        {
            "name": "Romania",
            "region": "Europe",
            "memberships": ["UN", "EU", "NATO"],
            "special_tags": [],
            "emoji": "ðŸ‡·ðŸ‡´",
        },
        {
            "name": "Russia",
            "region": "Asia",
            "memberships": ["UN", "CIS", "G20"],
            "special_tags": [],
            "emoji": "ðŸ‡·ðŸ‡º",
        },
        {
            "name": "Rwanda",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡·ðŸ‡¼",
        },
        {
            "name": "Saint Kitts and Nevis",
            "region": "Caribbean",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡°ðŸ‡³",
        },
        {
            "name": "Saint Lucia",
            "region": "Caribbean",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡±ðŸ‡¨",
        },
        {
            "name": "Saint Vincent and the Grenadines",
            "region": "Caribbean",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡»ðŸ‡¨",
        },
        {
            "name": "Samoa",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡¼ðŸ‡¸",
        },
        {
            "name": "San Marino",
            "region": "Europe",
            "memberships": ["UN"],
            "special_tags": ["microstate"],
            "emoji": "ðŸ‡¸ðŸ‡²",
        },
        {
            "name": "Sao Tome and Principe",
            "region": "Africa",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡¸ðŸ‡¹",
        },
        {
            "name": "Saudi Arabia",
            "region": "Asia",
            "memberships": ["UN", "OIC"],
            "special_tags": [],
            "emoji": "ðŸ‡¸ðŸ‡¦",
        },
        {
            "name": "Senegal",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡¸ðŸ‡³",
        },
        {
            "name": "Serbia",
            "region": "Europe",
            "memberships": ["UN"],
            "special_tags": ["partially recognized"],
            "emoji": "ðŸ‡·ðŸ‡¸",
        },
        {
            "name": "Seychelles",
            "region": "Africa",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡¸ðŸ‡¨",
        },
        {
            "name": "Sierra Leone",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡¸ðŸ‡±",
        },
        {
            "name": "Singapore",
            "region": "Asia",
            "memberships": ["UN", "ASEAN"],
            "special_tags": [],
            "emoji": "ðŸ‡¸ðŸ‡¬",
        },
        {
            "name": "Slovakia",
            "region": "Europe",
            "memberships": ["UN", "EU", "NATO"],
            "special_tags": [],
            "emoji": "ðŸ‡¸ðŸ‡°",
        },
        {
            "name": "Slovenia",
            "region": "Europe",
            "memberships": ["UN", "EU"],
            "special_tags": [],
            "emoji": "ðŸ‡¸ðŸ‡®",
        },
        {
            "name": "Solomon Islands",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡¸ðŸ‡§",
        },
        {
            "name": "Somalia",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡¸ðŸ‡´",
        },
        {
            "name": "South Africa",
            "region": "Africa",
            "memberships": ["UN", "AU", "BRICS"],
            "special_tags": [],
            "emoji": "ðŸ‡¿ðŸ‡¦",
        },
        {
            "name": "South Korea",
            "region": "Asia",
            "memberships": ["UN", "G20"],
            "special_tags": [],
            "emoji": "ðŸ‡°ðŸ‡·",
        },
        {
            "name": "South Sudan",
            "region": "Africa",
            "memberships": ["UN"],
            "special_tags": ["partially recognized"],
            "emoji": "ðŸ‡¸ðŸ‡¸",
        },
    ]
)

country_data.extend(
    [
        {
            "name": "Taiwan",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": ["partially recognized", "special status"],
            "emoji": "ðŸ‡¹ðŸ‡¼",
        },
        {
            "name": "Tajikistan",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡¹ðŸ‡¯",
        },
        {
            "name": "Tanzania",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡¹ðŸ‡¿",
        },
        {
            "name": "Thailand",
            "region": "Asia",
            "memberships": ["UN", "ASEAN"],
            "special_tags": [],
            "emoji": "ðŸ‡¹ðŸ‡­",
        },
        {
            "name": "Togo",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡¹ðŸ‡¬",
        },
        {
            "name": "Tonga",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡¹ðŸ‡´",
        },
        {
            "name": "Trinidad and Tobago",
            "region": "Caribbean",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡¹ðŸ‡¹",
        },
        {
            "name": "Tunisia",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡¹ðŸ‡³",
        },
        {
            "name": "Turkey",
            "region": "Asia",
            "memberships": ["UN", "NATO", "G20"],
            "special_tags": [],
            "emoji": "ðŸ‡¹ðŸ‡·",
        },
        {
            "name": "Turkmenistan",
            "region": "Asia",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡¹ðŸ‡²",
        },
        {
            "name": "Tuvalu",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": ["island nation", "microstate"],
            "emoji": "ðŸ‡¹ðŸ‡»",
        },
        {
            "name": "Uganda",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡ºðŸ‡¬",
        },
        {
            "name": "Ukraine",
            "region": "Europe",
            "memberships": ["UN", "G20"],
            "special_tags": [],
            "emoji": "ðŸ‡ºðŸ‡¦",
        },
        {
            "name": "United Arab Emirates",
            "region": "Asia",
            "memberships": ["UN", "GCC"],
            "special_tags": [],
            "emoji": "ðŸ‡¦ðŸ‡ª",
        },
        {
            "name": "United Kingdom",
            "region": "Europe",
            "memberships": ["UN", "G7", "NATO"],
            "special_tags": [],
            "emoji": "ðŸ‡¬ðŸ‡§",
        },
        {
            "name": "United States",
            "region": "North America",
            "memberships": ["UN", "NATO", "G7"],
            "special_tags": [],
            "emoji": "ðŸ‡ºðŸ‡¸",
        },
        {
            "name": "Uruguay",
            "region": "South America",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡ºðŸ‡¾",
        },
        {
            "name": "Uzbekistan",
            "region": "Asia",
            "memberships": ["UN", "CIS"],
            "special_tags": [],
            "emoji": "ðŸ‡ºðŸ‡¿",
        },
        {
            "name": "Vanuatu",
            "region": "Oceania",
            "memberships": ["UN"],
            "special_tags": ["island nation"],
            "emoji": "ðŸ‡»ðŸ‡º",
        },
        {
            "name": "Vatican City",
            "region": "Europe",
            "memberships": ["UN"],
            "special_tags": ["microstate", "theocratic"],
            "emoji": "ðŸ‡»ðŸ‡¦",
        },
        {
            "name": "Venezuela",
            "region": "South America",
            "memberships": ["UN"],
            "special_tags": [],
            "emoji": "ðŸ‡»ðŸ‡ª",
        },
        {
            "name": "Vietnam",
            "region": "Asia",
            "memberships": ["UN", "ASEAN"],
            "special_tags": [],
            "emoji": "ðŸ‡»ðŸ‡³",
        },
        {
            "name": "Yemen",
            "region": "Asia",
            "memberships": ["UN", "OIC"],
            "special_tags": [],
            "emoji": "ðŸ‡¾ðŸ‡ª",
        },
        {
            "name": "Zambia",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡¿ðŸ‡²",
        },
        {
            "name": "Zimbabwe",
            "region": "Africa",
            "memberships": ["UN", "AU"],
            "special_tags": [],
            "emoji": "ðŸ‡¿ðŸ‡¼",
        },
    ]
)


def get_flag_url(country_name):
    """Generate a Wikipedia flag PNG link for a country."""
    base_url = "https://en.wikipedia.org/wiki/"
    page_title = f"Flag_of_{country_name.replace(' ', '_')}"
    url = base_url + urllib.parse.quote(page_title)

    try:
        response = requests.get(url)
        if response.status_code == 200:
            # Look for the first PNG link in the HTML
            start = response.text.find("upload.wikimedia.org")
            if start != -1:
                end = response.text.find(".png", start)
                if end != -1:
                    return "https://" + response.text[start : end + 4]
    except Exception as e:
        print(f"Failed to fetch flag for {country_name}: {e}")
    return ""


def estimate_difficulty(name, special_tags):
    """Rough difficulty estimate based on size/status."""
    if "microstate" in special_tags:
        return 4.0
    if "partially recognized" in special_tags or "unrecognized" in special_tags:
        return 3.5
    if "special status" in special_tags:
        return 2.5
    return 1.0


# Write CSV
with open("flags_full.csv", mode="w", newline="", encoding="utf-8") as file:
    writer = csv.writer(file)
    writer.writerow(["name", "description", "difficulty", "image", "emoji"])

    for entry in country_data:
        name = entry["name"]
        tags = [entry["region"]] + entry["memberships"] + entry["special_tags"]
        description = ", ".join(tags)
        difficulty = estimate_difficulty(name, entry["special_tags"])
        image = get_flag_url(name)
        emoji = entry["emoji"]

        writer.writerow([name, description, difficulty, image, emoji])

print("âœ… flags_full.csv generated successfully!")
